#!/usr/bin/env node
// -*- js -*-

var exec = require('child_process').exec,
    fs   = require('fs'),
    path = require('path');

exec('droonga-http-server-status', function(error, stdout, stderr) {
  if (error) {
    process.exit(false);
    return;
  }

  var defaultConfigs = require('../lib/default-configs');
  var pidFile = path.resolve(defaultConfigs.baseDir, defaultConfigs.pid_file);
  var pid = fs.readFileSync(pidFile, 'utf8');
  pid = pid.trim();
  console.log('Sending SIGTERM to the process...');
  process.kill(pid, 'SIGTERM');
});
